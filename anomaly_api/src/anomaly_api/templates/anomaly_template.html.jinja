<script id="htmx-script" src="https://unpkg.com/htmx.org@1.9.11"></script>
<link rel="stylesheet" href="{{ API_URL }}/static/main.css">
<script type="module" src="{{ API_URL }}/static/anomaly.js"></script>


<div class="tw-preflight">
    <div id="anomaly-app" class="tw-container tw-grid tw-grid-cols-12 tw-gap-4 tw-mx-auto">
        {% import './percentil_component.html.jinja' as inputComponent %}
        <div id="filtersContainer"
            class="tw-container tw-my-4 lg:tw-col-span-4 sm:tw-col-span-12 tw-bg-white dark:tw-bg-[#1e1e1e] dark:tw-text-white">

            <!--OID Search section-->
            <details id="oidSearchContainer" class="tw-mx-4 tw-my-4">
                <summary
                    class="tw-border-0 tw-border-b-2 tw-border-solid tw-border-b-gray-500 hover:tw-bg-[#757575] dark:tw-text-white tw-mb-4">
                    oid
                </summary>
                <div id="inputOidContainer"
                    class="tw-p-4 tw-bg-white dark:tw-bg-[#1e1e1e] dark:tw-text-white tw-w-5/5 tw-flex tw-flex-col tw-rounded-sm tw-border tw-border-solid tw-border-gray-500">
                    <span>Object id</span>
                    <input id="inputOid" name="objectId" type="text"
                        class="tw-w-2/5 tw-border-0 tw-border-b-2 tw-border-solid tw-border-b-gray-500 hover:tw-border-b-gray-300">
                    <button id="btnOidSearch"
                        class="tw-text-xs tw-bg-blue-500 tw-border-transparent hover:tw-bg-blue-700 tw-text-white tw-font-bold tw-py-1 tw-px-2 tw-rounded tw-w-1/6 tw-self-end ">search</button>
                </div>
            </details>

            <!--Score Search section-->
            <details id="scoreSearchContainer" class="tw-m-4 tw-rounded-lg">
                <summary id="scoreSearchBtn"
                    class="tw-border-0 tw-border-b-2 tw-border-solid tw-border-b-gray-500 hover:tw-bg-[#757575] tw-mb-4">
                    score search
                </summary>
                <div id="scoreFormContainer"
                    class="tw-bg-white dark:tw-bg-[#1e1e1e] dark:tw-text-white tw-rounded-sm tw-p-4 tw-border tw-border-solid tw-border-gray-500">
                    <div id="numberDectections" class="tw-my-4">
                        <p for="numberDetections">number of detections</p>
                        <div id="numberDetections" class="tw-flex tw-gap-4">
                            {{ inputComponent.input_component("inputNdetMin", "inputNdetMax","")}}
                        </div>
                    </div>
                    <div class="tw-grid tw-grid-cols-12 tw-gap-4">
                        <div id="scoreCategory" class="tw-col-span-3">
                            <label for="Category">Category:</label>
                            <select id="Category"
                                class="tw-w-full tw-border-0 tw-border-b-2 tw-border-solid tw-border-b-gray-500 dark:tw-text-white hover:tw-border-b-gray-300">
                                <option value=""></option>
                                <option value="transient" class="dark:tw-text-black">Transient</option>
                                <option value="stochastic" class="dark:tw-text-black">Stochastic</option>
                                <option value="periodic" class="dark:tw-text-black">Periodic</option>
                            </select>
                        </div>
                        <div class="tw-col-span-9 tw-justify-self-center">
                            <div id="score" class=" tw-col-span-full">
                                <label>score</label>
                                <div class="tw-flex tw-gap-4">
                                    {{ inputComponent.input_component("inputScoreMin", "inputScoreMax", "Category")}}
                                </div>
                            </div>
                            <div id="percentil" class="tw-col-span-full tw-my-4">
                                <label>percentil</label>
                                <div class="tw-flex tw-gap-4">
                                    {{ inputComponent.input_component("inputPercentilMin", "inputPercentilMax",
                                    "Category") }}
                                </div>
                            </div>
                            <div id="graphic"
                                class="tw-col-span-full tw-mb-4 tw-border tw-border-solid tw-border-gray-500">
                                <img src="../static/grafico-torta-etiquetas.png" style="width:300px;height:100px;">
                            </div>
                            <div id="actions" class="tw-col-span-full tw-flex tw-justify-end tw-gap-4 tw-px-4 tw-mb-4">
                                <button id="btnScoreSearch"
                                    class="tw-text-xs tw-bg-blue-500 tw-border-transparent hover:tw-bg-blue-700 tw-text-white tw-font-bold tw-py-1 tw-px-2 tw-rounded tw-self-end">search</button>
                                <button id="btnScoreClear"
                                    class="tw-text-xs tw-bg-blue-500 tw-border-transparent hover:tw-bg-blue-700 tw-text-white tw-font-bold tw-py-1 tw-px-2 tw-rounded tw-self-end">clear</button>
                            </div>
                        </div>
                    </div>
                </div>
            </details>

            <!--Multiple Score Search section-->
            <details id="multipleScoreSearchContainer" class="tw-m-4 tw-rounded-lg">
                <summary id="multipleScoreSearchBtn"
                    class="tw-border-0 tw-border-b-2 tw-border-solid tw-border-b-gray-500 hover:tw-bg-[#757575] tw-mb-4">
                    multiple score search
                </summary>
                <div id="multipleFormContainer"
                    class="tw-bg-white dark:tw-bg-[#1e1e1e] dark:tw-text-white tw-rounded-sm tw-p-4 tw-border tw-border-solid tw-border-gray-500">
                    <div id="multipleNumberDectections" class="tw-my-4">
                        <p>number of detections</p>
                        <div class="tw-flex tw-gap-4">
                            {{ inputComponent.input_component("inputMultipleNdetMin",
                            "inputMultipleNdetMax","Category")}}
                        </div>
                    </div>
                    <!--Input container-->
                    <div class="tw-grid tw-grid-cols-12 tw-gap-4">
                        <!--Transient input section-->
                        <div id="multipleTransient" class="tw-col-span-12 tw-mb-4 tw-grid tw-gap-4">
                            <div class="tw-col-span-12">
                                <label>Transient</label>
                            </div>
                            <div class="tw-col-span-6">
                                <label class="">score</label>
                                <div class="tw-flex tw-gap-4">
                                    {{ inputComponent.input_component("inputMultipleScoreMin",
                                    "inputMultipleScoreMax", "transient") }}
                                </div>
                            </div>

                            <div class="tw-col-span-6">
                                <label class="">percentil</label>
                                <div class="tw-flex tw-gap-4">
                                    {{ inputComponent.input_component("inputMultiplePercentilMin",
                                    "inputMultiplePercentilMax", "transient") }}
                                </div>
                            </div>
                            <!--Graphic transient-->
                            <div id="multipleGraphicTransient"
                                class="tw-col-span-12 tw-mb-4 tw-flex tw-justify-center tw-border tw-border-solid tw-border-gray-500">
                                <img src="../static/grafico-torta-etiquetas.png" style="width:300px;height:100px;">
                            </div>
                        </div>
                        <!--Stochastic input section-->
                        <div id="multipleStochastic" class="tw-col-span-12 tw-mb-4 tw-grid tw-gap-4">
                            <div class="tw-col-span-12">
                                <label>Stochastic</label>
                            </div>
                            <div class="tw-col-span-6">
                                <label class="">score</label>
                                <div class="tw-flex tw-gap-4">
                                    {{ inputComponent.input_component("inputMultipleStochasticScoreMin",
                                    "inputMultipleStochasticScoreMax", "periodic") }}
                                </div>
                            </div>

                            <div class="tw-col-span-6">
                                <label class="">percentil</label>
                                <div class="tw-flex tw-gap-4">
                                    {{ inputComponent.input_component("inputMultipleStoachasticPercentilMin",
                                    "inputMultipleStochasticMax", "stochastic") }}
                                </div>
                            </div>
                            <!--Graphic Stochastic-->
                            <div id="multipleGraphicStochastic"
                                class="tw-col-span-12 tw-mb-4 tw-flex tw-justify-center tw-border tw-border-solid tw-border-gray-500">
                                <img src="../static/grafico-torta-etiquetas.png" style="width:300px;height:100px;">
                            </div>
                        </div>
                        <!--Periodic input section-->
                        <div id="multiplePeriodic" class="tw-col-span-12 tw-mb-4 tw-grid tw-gap-4">
                            <div class="tw-col-span-12">
                                <label>Periodic</label>
                            </div>
                            <div class="tw-col-span-6">
                                <label class="">score</label>
                                <div class="tw-flex tw-gap-4">
                                    {{ inputComponent.input_component("inputMultiplePeriodicScoreMin",
                                    "inputMultiplePeriodicScoreMax", "periodic") }}
                                </div>
                            </div>

                            <div class="tw-col-span-6">
                                <label class="">percentil</label>
                                <div class="tw-flex tw-gap-4">
                                    {{ inputComponent.input_component("inputMultiplePeriodicPercentilMin",
                                    "inputMultiplePeriodicPercentilMax", "periodic") }}
                                </div>
                            </div>
                            <!--Graphic Periodic-->
                            <div id="multipleGraphicPeriodic"
                                class="tw-col-span-12 tw-mb-4 tw-flex tw-justify-center tw-border tw-border-solid tw-border-gray-500">
                                <img src="../static/grafico-torta-etiquetas.png" style="width:300px;height:100px;">
                            </div>
                        </div>
                        <div id="multipleActions"
                            class="tw-col-span-full tw-flex tw-justify-end tw-gap-4 tw-px-4 tw-mb-4">
                            <button id="btnMultipleScoreSearch"
                                class="tw-text-xs tw-bg-blue-500 tw-border-transparent hover:tw-bg-blue-700 tw-text-white tw-font-bold tw-py-1 tw-px-2 tw-rounded tw-self-end">search</button>
                            <button id="btnMultipleScoreClear"
                                class="tw-text-xs tw-bg-blue-500 tw-border-transparent hover:tw-bg-blue-700 tw-text-white tw-font-bold tw-py-1 tw-px-2 tw-rounded tw-self-end">clear</button>
                        </div>
                    </div>
                </div>
            </details>

            <!--Probability Search section-->
            <details id="probabilitySearchContainer" class="tw-m-4  tw-rounded-lg">
                <summary id="probabilitySearchBtn"
                    class="tw-border-0 tw-border-b-2 tw-border-solid tw-border-b-gray-500 hover:tw-bg-[#757575] tw-mb-4">
                    probability score search
                </summary>
                <div id="probabilityFormContainer"
                    class="tw-bg-white dark:tw-bg-[#1e1e1e] dark:tw-text-white tw-rounded-sm tw-p-4 tw-border tw-border-solid tw-border-gray-500">
                    <div id="numberDectections" class="tw-my-4">
                        <p>number of detections</p>
                        <div class="tw-flex tw-gap-4">
                            {{ inputComponent.input_component("inputProbabilityNdetMin",
                            "inputProbabilityNdetMax","CategoryProbability")}}
                        </div>
                    </div>
                    <div class="tw-grid tw-grid-cols-12 tw-gap-4">
                        <div class="tw-col-span-3">
                            <label for="CategoryProbability">Category:</label>
                            <select id="CategoryProbability"
                                class="tw-w-full tw-border-0 tw-border-b-2 tw-border-solid tw-border-b-gray-500 hover:tw-border-b-gray-300">
                                <option value=""></option>
                                <!-- This clases are for lc classifier top, must be configurable from the backend -->
                                <option value="Transient">Transient</option>
                                <option value="Stochastic">Stochastic</option>
                                <option value="Periodic">Periodic</option>
                            </select>
                        </div>
                        <div class="tw-col-span-9">
                            <!--Probability input-->
                            <div id="probability" class="tw-col-span-full">
                                <label class="">probability</label>
                                <div class="tw-flex tw-gap-4">
                                    {{ inputComponent.input_component("inputProbabilityProbabilityMin",
                                    "inputProbabilityProbabilityMax","CategoryProbability")}}
                                </div>
                            </div>
                            <!--Probability Score input-->
                            <div id="probabilityScore" class="tw-col-span-full tw-my-4">
                                <label class="">score</label>
                                <div class="tw-flex tw-gap-4">
                                    {{ inputComponent.input_component("inputProbabilityScoreMin",
                                    "inputProbabilityScoreMax","CategoryProbability")}}
                                </div>
                            </div>
                            <!--Probability percentil input-->
                            <div id="probabilityPercentil" class="tw-col-span-full tw-mb-4">
                                <label class="">percentil</label>
                                <div class="tw-flex tw-gap-4">
                                    {{ inputComponent.input_component("inputProbabilityPercentilMin",
                                    "inputProbabilityPercentilMax", "CategoryProbability") }}
                                </div>
                            </div>
                            <div id="actions" class="tw-col-span-full tw-flex tw-justify-end tw-gap-4 tw-px-4 tw-mb-4">
                                <button id="btnProbabilitySearch"
                                    class="tw-text-xs tw-bg-blue-500 tw-border-transparent hover:tw-bg-blue-700 tw-text-white tw-font-bold tw-py-1 tw-px-2 tw-rounded tw-self-end">search</button>
                                <button id="btnProbabilityClear"
                                    class="tw-text-xs tw-bg-blue-500 tw-border-transparent hover:tw-bg-blue-700 tw-text-white tw-font-bold tw-py-1 tw-px-2 tw-rounded tw-self-end">clear</button>
                            </div>
                        </div>
                    </div>
                </div>
            </details>

        </div>

        <div class="lg:tw-col-span-8 sm:tw-col-span-12">
            <div id="tableContainer"></div>
        </div>
    </div>
</div>
