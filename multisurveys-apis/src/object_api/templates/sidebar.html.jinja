<meta name="htmx-config" content='{"selfRequestsOnly": false}'>
<link rel="stylesheet" href="{{API_URL}}/static/object.css">
<script src="{{API_URL}}/htmx/htmx.min.js"></script>


{% if objects_list['items']|length > 0 %}
<div id="sidebar" class="tw-preflight">

    <table class="tw-table-auto tw-border-collapse tw-bg-[#424242] tw-text-left tw-w-full">
        <thead>
            <tr class="tw-text-white/70 tw-h-[34px] tw-text-[0.875rem]">
                <th class="tw-px-4 tw-text-white">Object List</th>
            </tr>
        </thead>
        <tbody>
            {% if selected_oid %}
                <tr class="tw-h-[34px] tw-text-[#1976D2] tw-font-medium tw-text-[0.875rem] tw-bg-[#1976D2]/30">
                    <td class="tw-px-4">{{selected_oid}}</td>
                </tr>
            {% endif %}
            {% for item in objects_list['items']%}

                {% if item['oid'] != selected_oid %}
                    <tr class="tw-h-[34px] tw-text-white tw-text-[0.875rem] hover:tw-bg-[#b2b2b2]/50 hover:tw-cursor-pointer">
                        <td 
                        name="sidebar-row-element"
                        data-oid='{{item["oid"]}}'
                        hx-get="{{API_URL}}/sidebar"
                        hx-trigger="click"
                        hx-swap="outerHTML"
                        hx-target="#sidebar"
                        hx-replace-url="true"
                        class="tw-px-4"
                        >
                        {{item['oid']}}
                        </td>
                    </tr>
                {% endif %}
            {% endfor %}
        </tbody>
    </table>

    <div id="" class="tw-flex tw-justify-end tw-items-center tw-text-base tw-bg-[#424242] tw-h-[48px]">
        {% if has_prev %}
            <span 
            id="prev_page"
            name="prev_page_sidebar"
            data-next="{{prev}}"
            hx-get="{{API_URL}}/sidebar"
            hx-trigger="click"
            hx-swap="outerHTML"
            hx-target="#sidebar"
            hx-replace-url="true"
            class="tw-inline-block hover:tw-bg-[#b2b2b2] hover:tw-cursor-pointer"
            >
            <svg xmlns="http://www.w3.org/2000/svg" height="28px" viewBox="0 -960 960 960" width="28px" fill="#FFFFFF">
            <path d="M400-240 160-480l240-240 56 58-142 142h486v80H314l142 142-56 58Z"/>
            </svg>
            </span>
        {% endif %}
        <span class="tw-inline-block tw-text-white tw-text-lg tw-text-center tw-h-[28px] tw-w-[48px]">{{objects_list['current_page']}}
        </span>
        
        {% if has_next %}
            <span 
            id="next_page"
            name="next_page_sidebar"
            data-next="{{next}}"
            hx-get="{{API_URL}}/sidebar"
            hx-trigger="click"
            hx-swap="outerHTML"
            hx-target="#sidebar"
            hx-replace-url="true"
            class="tw-inline-block hover:tw-bg-[#b2b2b2] hover:tw-cursor-pointer"
            >
            <svg xmlns="http://www.w3.org/2000/svg" height="28px" viewBox="0 -960 960 960" width="28px" fill="#FFFFFF">
            <path d="m560-240-56-58 142-142H160v-80h486L504-662l56-58 240 240-240 240Z"/>
            </svg>
            </span>
        {%endif%}
    </div>
</div>

{% else %}
    {% if objects_list['info_message'] %}
        <span class="tw-block tw-mx-auto tw-text-white/70 tw-py-2">
            {{objects_list['info_message'] }}
        </span>
    {% endif %}
{% endif %}

<script type="module">
    import {init, elementReady} from "{{API_URL}}/static/sidebar.js"


    elementReady("#sidebar").then((el) => {
        init();
    });
</script>
