<div class="row">
  <div class="col-sm-12">
    <span class="font-semibold mr-3">Fold</span>
    {{ toggle.toggle("fold", "Off", "On", config_state.fold)}}
  </div>
  <div class="col-sm-12">
    <input id="period-slider" type="range" min="0.05" max="500" value="{{config_state.period}}" class="my-2 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700">
    <div class="flex items-center gap-2 mt-2">
      <input name="period" value="{{config_state.period}}" class="w-24">
      <span name="x2" class="px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors cursor-pointer select-none">X2</span>
      <span name="div2" class="px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors cursor-pointer select-none">/2</span>
    </div>
  </div>
  <div class="col-sm-12 mt-2">
    <span class="font-semibold mr-3">Periodogram</span>
    {{ toggle.toggle("periodogram_enabled", "Off", "On", config_state.periodogram_enabled)}}
  </div>
</div>

<script>
var slider = document.querySelector('#period-slider');
var input = document.querySelector('input[name="period"]');
var x2 = document.querySelector('span[name="x2"]');
var div2 = document.querySelector('span[name="div2"]');

slider.addEventListener('input', function(e) {
  input.value = e.target.value;
})

input.addEventListener('change', function(e) {
  slider.value = e.target.value;
})

x2.addEventListener('click', function(e) {
  input.value = input.value * 2;
  if (input.value > 500) input.value = 500
  if (input.value < 0.05) input.value = 0.05

  input.dispatchEvent(new Event('change', { bubbles: true }));
})

div2.addEventListener('click', function(e) {
  input.value = input.value / 2;
  if (input.value > 500) input.value = 500
  if (input.value < 0.05) input.value = 0.05
  input.dispatchEvent(new Event('change', { bubbles: true }));
})

document.addEventListener('periodogram:periodSelected', function(event) {
  input.value = event.detail.period;
  input.dispatchEvent(new Event('change', { bubbles: true }));
});
</script>
