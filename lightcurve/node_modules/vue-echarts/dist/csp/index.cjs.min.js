"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue-demi"),t=require("echarts/core"),n=require("resize-detector"),o=function(){return o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var r=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function i(e){return t=Object.create(null),r.forEach((function(n){t[n]=function(t){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[t].apply(e.value,n)}}(n)})),t;var t}var a={autoresize:[Boolean,Object]},u=/^on[^a-z]/,c=function(e){return u.test(e)};function s(t,n){var o=e.isRef(t)?e.unref(t):t;return o&&"object"==typeof o&&"value"in o?o.value||n:o||n}var l="ecLoadingOptions";var f={loading:Boolean,loadingOptions:Object},v="x-vue-echarts";e.Vue2&&e.Vue2.config.ignoredElements.push(v);var p="ecTheme",d="ecInitOptions",h="ecUpdateOptions",g=/(^&?~?!?)native:/,O=e.defineComponent({name:"echarts",props:o(o({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},a),f),emits:{},inheritAttrs:!1,setup:function(r,a){var u=a.attrs,f=e.shallowRef(),v=e.shallowRef(),O=e.shallowRef(),m=e.shallowRef(),E=e.inject(p,null),_=e.inject(d,null),b=e.inject(h,null),j=e.toRefs(r),w=j.autoresize,y=j.manualUpdate,x=j.loading,L=j.loadingOptions,z=e.computed((function(){return m.value||r.option||null})),A=e.computed((function(){return r.theme||s(E,{})})),P=e.computed((function(){return r.initOptions||s(_,{})})),R=e.computed((function(){return r.updateOptions||s(b,{})})),T=e.computed((function(){return function(e){var t={};for(var n in e)c(n)||(t[n]=e[n]);return t}(u)})),U={},D=e.getCurrentInstance().proxy.$listeners,I={};function C(n){if(v.value){var o=O.value=t.init(v.value,A.value,P.value);r.group&&(o.group=r.group),Object.keys(I).forEach((function(e){var t=I[e];if(t){var n=e.toLowerCase();"~"===n.charAt(0)&&(n=n.substring(1),t.__once__=!0);var r=o;if(0===n.indexOf("zr:")&&(r=o.getZr(),n=n.substring(3)),t.__once__){delete t.__once__;var i=t;t=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];i.apply(void 0,e),r.off(n,t)}}r.on(n,t)}})),w.value?e.nextTick((function(){o&&!o.isDisposed()&&o.resize(),i()})):i()}function i(){var e=n||z.value;e&&o.setOption(e,R.value)}}function S(){O.value&&(O.value.dispose(),O.value=void 0)}D?Object.keys(D).forEach((function(e){g.test(e)?U[e.replace(g,"$1")]=D[e]:I[e]=D[e]})):Object.keys(u).filter((function(e){return c(e)})).forEach((function(e){var t=e.charAt(2).toLowerCase()+e.slice(3);if(0!==t.indexOf("native:"))"Once"===t.substring(t.length-4)&&(t="~".concat(t.substring(0,t.length-4))),I[t]=u[e];else{var n="on".concat(t.charAt(7).toUpperCase()).concat(t.slice(8));U[n]=u[e]}}));var N=null;e.watch(y,(function(t){"function"==typeof N&&(N(),N=null),t||(N=e.watch((function(){return r.option}),(function(e,t){e&&(O.value?O.value.setOption(e,o({notMerge:e!==t},R.value)):C())}),{deep:!0}))}),{immediate:!0}),e.watch([A,P],(function(){S(),C()}),{deep:!0}),e.watchEffect((function(){r.group&&O.value&&(O.value.group=r.group)}));var k=i(O);return function(t,n,r){var i=e.inject(l,{}),a=e.computed((function(){return o(o({},s(i,{})),null==r?void 0:r.value)}));e.watchEffect((function(){var e=t.value;e&&(n.value?e.showLoading(a.value):e.hideLoading())}))}(O,x,L),function(o,r,i){var a=null;e.watch([i,o,r],(function(e,o,r){var i=e[0],u=e[1],c=e[2];if(i&&u&&c){var s=!0===c?{}:c,l=s.throttle,f=void 0===l?100:l,v=s.onResize,p=function(){u.resize(),null==v||v()};a=f?t.throttle(p,f):p,n.addListener(i,a)}r((function(){i&&a&&n.removeListener(i,a)}))}))}(O,w,v),e.onMounted((function(){C()})),e.onBeforeUnmount((function(){S()})),o({chart:O,root:f,inner:v,setOption:function(e,t){r.manualUpdate&&(m.value=e),O.value?O.value.setOption(e,t||{}):C(e)},nonEventAttrs:T,nativeListeners:U},k)},render:function(){var t=e.Vue2?{attrs:this.nonEventAttrs,on:this.nativeListeners}:o(o({},this.nonEventAttrs),this.nativeListeners);return t.ref="root",t.class=t.class?["echarts"].concat(t.class):"echarts",e.h(v,t,[e.h("div",{ref:"inner",class:"vue-echarts-inner"})])}});exports.INIT_OPTIONS_KEY=d,exports.LOADING_OPTIONS_KEY=l,exports.THEME_KEY=p,exports.UPDATE_OPTIONS_KEY=h,exports.default=O;
//# sourceMappingURL=index.cjs.min.js.map
