<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; }
        /* .box { background-color: #1e1e1e; border-radius: 10px; width: 750px; height: 450px; border: none; padding: 10px; position: relative; } */
        .box { background-color: #1e1e1e;  box-sizing: content-box; border-radius: 10px; width: 750px;padding-bottom: 30px;}
        h1 {padding: 30px 0px 0px 30px;}
        .data { color: white; }
        .link { color: rgb(50, 119, 175);text-decoration: underline;cursor:pointer}
        .left-text, .middle-text { text-align: center; width: 200px; height: 32px; }
        .middle-text { width: 300px; }
        .rows:hover { opacity: 0.7; }
        .tooltip { position: sticky; display: inline-block; border-bottom: 1px dotted gray; }
        .glow .tooltiptext { display: none; width: 200px; background-color: gray; color: #fff; text-align: center; border-radius: 6px; padding: 5px 0; position: absolute; z-index: 1; opacity: 0.5; }
        .glow:hover .tooltiptext { display: block; }
        .find-button, .other-button { background-color: #0097a7; padding: 2px 100px; border: none; font-weight: 550; font-size: 15px; cursor: pointer; color: white; }
        .other-button { background-color: #2196F3; padding: 2px 60px; }
        .flex { max-width: 100%; }
        .text-center { text-align: center; }
        .text-left {text-align: left;}
        td, th { padding: 0 7.5px; height: 40px; width: 70px; text-align: left; }
        th { padding-left: 7.5px; padding-right: 7.5px; }
        th:hover {cursor: pointer;}
        tr {border: solid; border-width: 1px 0;}
        tr:first-child { border-top: 0;}
        td:first-child, th:first-child { padding-left: 0;border-top: none; }
        td:last-child, th:last-child { padding-right: 0; border-bottom: none;}
        table { width: calc(100% + 30px); table-layout: fixed; border-spacing: 15px 0px; border-collapse: collapse;}
        .table-container { overflow: hidden; width: 400px; margin-left: 50px; }
        .th,.td{padding: 0px 100px 0px 0px;height: 40px;width: 200px;}
        .tag {color: white; position: absolute; right:0%; bottom: 0%; height: auto; margin: 0;font-size:17px}
        button, input[type="submit"], input[type="reset"] {background: none;color: inherit;border: none;padding: 0;font: inherit;cursor: pointer;outline: inherit;}
        .info-icon {vertical-align: middle;}
        .arrow-up  {display: none;}
        .arrow-up:hover {display: flex; vertical-align: middle}
    </style>
    </style>
</head>
<body>
    

    <div class="box">   
        <div class="data" id="tableContainer">
            <h1>Magnitude Statistics <span class="glow"><span class="material-symbols-outlined tooltip change-button">info</span><span class="tooltiptext">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Harum incidunt consectetur aspernatur repellendus. Voluptates sunt odit numquam esse iure obcaecati quaerat officia inventore perspiciatis earum ea veniam vero, consequuntur voluptas?</span></span></h1>
            <table class="table-container" id="myTable">
                <colgroup><col><col></colgroup>
                <thead>
                    <tr>
                        <th class="text-left th">Stat <span class="arrow-up"><span class="material-symbols-outlined">arrow_upward_alt</span></span></th>
                        <th class="text-left th">r</th>
                    </tr>
                </thead>
                <tbody id="dataTableBody">
                    <tr class="rows">
                        <td class="text-left td" id="a11"></td>
                        <td class="text-left td" id="a21"></td>
                    </tr>
                    <tr class="rows">
                        <td class="text-left td" id="a12"></td>
                        <td class="text-left td" id="a22"></td>
                    </tr>
                    <tr class="rows">
                        <td class="text-left td" id="a13"></td>
                        <td class="text-left td" id="a23"></td>
                    </tr>
                    <tr class="rows">
                        <td class="text-left td" id="a14"></td>
                        <td class="text-left td" id="a24"></td>
                    </tr>
                    <tr class="rows">
                        <td class="text-left td" id="a15"></td>
                        <td class="text-left td" id="a25"></td>
                    </tr>
                    <tr class="rows">
                        <td class="text-left td" id="a16"></td>
                        <td class="text-left td" id="a26"></td>
                    </tr>
                    <tr class="rows">
                        <td class="text-left td" id="a17"></td>
                        <td class="text-left td" id="a27"></td>
                    </tr>
                    <tr class="rows">
                        <td class="text-left td" id="a18"></td>
                        <td class="text-left td" id="a28"></td>
                    </tr>
                    <tr class="rows">
                        <td class="text-left td" id="a19"></td>
                        <td class="text-left td" id="a29"></td>
                    </tr>
                    <tr class="rows">
                        <td class="text-left td" id="a110"></td>
                        <td class="text-left td" id="a210"></td>
                    </tr>
                    <tr class="rows">
                        <td class="text-left td" id="a111"></td>
                        <td class="text-left td" id="a211"></td>
                    </tr>
                    <tr class="rows">
                        <td class="text-left td" id="a112"></td>
                        <td class="text-left td" id="a212"></td>
                    </tr>
                    <tr class="rows">
                        <td class="text-left td" id="a113"></td>
                        <td class="text-left td" id="a213"></td>
                    </tr>
                    <tr class="rows">
                        <td class="text-left td" id="a114"></td>
                        <td class="text-left td" id="a214"></td>
                    </tr>
                </tbody>
                <tbody class="right-col"></tbody>
            </table>
        </div>
        <div style="display: inline;">
            <div style="padding:25px 0px 0px 0px ; display: inline-block;">
                <label style="color:white; padding: 0px 0px 0px 50px;" for="rowSelector">Rows to display:</label>
                <select id="rowSelect" style="color: white; background-color: #1e1e1e; border: none; border-bottom: solid; border-width: 1px;">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="14">All</option>
                </select>
            </div>
            <div style="display: inline-block; color: white; padding-left: 40px;">
                <span id="first-number"></span> - <span id="second-number"></span> of <span id="total-number"></span>
            </div>
            <div style="display: inline-block; padding-left: 60px;">
                    <button onclick="navigateTable(-1)" style="color:white; padding: 0px 20px 10px 0px;"> < </span>
                    <button onclick="navigateTable(1)" style="color:white;"> > </button>
            </div>
            
        </div>
    </div>

<script>
    const tableContainer = document.getElementById('tableContainer');
    const dataTableBody = document.getElementById('dataTableBody');
    const rowSelect = document.getElementById('rowSelect');
    let rowsPerPage = parseInt(rowSelect.value);
    let currentPage = 1;

    let statR = {{stat_r | tojson}};

    const stat = Object.keys(statR);
    const r = Object.values(statR);

    for (let i = 0; i < stat.length * 2; i++){

        if (i < 14){
            let row = '1';
            let name = 'a' + row + String(i+1);
            document.getElementById(name).innerHTML = stat[i];
        } else {
            row = '2';
            let name = 'a' + row + String(i - stat.length + 1);
            document.getElementById(name).innerHTML = r[i - stat.length];
        }
    }

    function navigateTable(direction) {
        currentPage += direction;
        const totalPages = Math.ceil(dataTableBody.rows.length / rowsPerPage);
        if (currentPage < 1) {
        currentPage = 1;
        } else if (currentPage > totalPages) {
        currentPage = totalPages;
        }
        showTablePage();
    }

    function showTablePage() {
        const startIndex = (currentPage - 1) * rowsPerPage;
        if (startIndex === 0){
            document.getElementById('first-number').innerHTML = 1;
        } else {
            document.getElementById('first-number').innerHTML = startIndex;
        }
        const endIndex = startIndex + rowsPerPage;
        if (endIndex > dataTableBody.rows.length){
            document.getElementById('second-number').innerHTML = dataTableBody.rows.length;
        } else {
            document.getElementById('second-number').innerHTML = endIndex;
        }
        

        const rows = dataTableBody.getElementsByTagName('tr');
        for (let i = 0; i < rows.length; i++) {
        if (i >= startIndex && i < endIndex) {
            rows[i].style.display = 'table-row';
        } else {
            rows[i].style.display = 'none';
        }
        }
    }

    let startIndex = currentPage;
    let endIndex = rowsPerPage;

    document.getElementById('first-number').innerHTML = startIndex;
    document.getElementById('second-number').innerHTML = endIndex;
    document.getElementById('total-number').innerHTML = dataTableBody.rows.length;
    rowSelect.addEventListener('change', () => {
        rowsPerPage = parseInt(rowSelect.value);
        currentPage = 1;
        showTablePage();
    });

    showTablePage();
</script>

</body>
</html>