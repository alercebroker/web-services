Metadata-Version: 2.1
Name: lightcurve
Version: 24.5.1rc102
Summary: Get lightcurve of objects from ZTF and ATLAS surveys
Author: Diego Rodriguez Mancini
Requires-Python: >=3.11,<3.12
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.11
Requires-Dist: P4J @ https://github.com/alercebroker/pipeline/releases/download/P4J-24.3.1/P4J-1.2.0-cp311-cp311-linux_x86_64.whl ; sys_platform == "linux"
Requires-Dist: P4J @ https://github.com/alercebroker/pipeline/releases/download/P4J-24.3.1/P4J-1.2.0-cp311-cp311-macosx_14_0_x86_64.whl ; sys_platform == "darwin"
Requires-Dist: cython (>=3.0.9,<4.0.0)
Requires-Dist: db-plugins (>=6.1.1a45,<7.0.0)
Requires-Dist: fastapi (>=0.100.0,<0.101.0)
Requires-Dist: httpx (>=0.24.1,<0.25.0)
Requires-Dist: jinja2 (>=3.1.2,<4.0.0)
Requires-Dist: numpy (>=1.26.4,<2.0.0)
Requires-Dist: pandas (>=2.2.1,<3.0.0)
Requires-Dist: prometheus-fastapi-instrumentator (>=6.1.0,<7.0.0)
Requires-Dist: psycopg2-binary (>=2.9.6,<3.0.0)
Requires-Dist: pymongo (>=4.4.1,<5.0.0)
Requires-Dist: ralidator-fastapi @ file:///home/alerce/Desktop/alerce/web-services/libs/ralidator-fastapi
Requires-Dist: returns (>=0.21.0,<0.22.0)
Requires-Dist: scipy (>=1.12.0,<2.0.0)
Requires-Dist: sqlalchemy[asyncio] (>=2.0.19,<3.0.0)
Description-Content-Type: text/markdown

# ALeRCE Lightcurve API
## For developers
Set up environment variables. Look at [example](.env.example) 
Run with `poetry run uvicorn api.api:app` or `poetry run dev`

### Connecting to remote databases without public IPs
If you want to test against a remote database that doesn't have public IP enabled, you can connect using an SSH tunnel via a proxy server. Check the EC2 console for the IP of the proxy server or ask on slack.

There are additional environment variables that you need to set up this tunnel: 

- `MONGO_IP`: the private ip of the mongo instance to connect to
- `PROXY_IP`: the public ip of the proxy instance that has access to `MONGO_IP`
- `SSH_PKEY`: path to the public key used to connect to the `PROXY_IP`

Then run `poetry run tunnel` (make sure to have run `poetry install` first)

## HTMX endpoint
The htmx returned by this API's htmx endpoint emits the following events:

|       Event      |       Trigger     |      Detail content     |     Level     |
|:----------------:|:-----------------:|:-----------------------:|:-------------:|
| onDetectionClick | Clicked detection | Clicked detection index | document.body |


